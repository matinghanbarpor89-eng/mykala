<script> /* SLIDER */ const slides=["https://picsum.photos/1200/300?1","https://picsum.photos/1200/300?2","https://picsum.photos/1200/300?3"]; let si=0; setInterval(()=>{document.getElementById("slide").src=slides[si];si=(si+1)%slides.length;},3500); /* CUSTOM ALERT */ const customAlert=document.getElementById("customAlert"); let alertTimeout; function showAlert(msg){ document.getElementById("alertText").innerText=msg; customAlert.classList.add("show"); clearTimeout(alertTimeout); alertTimeout=setTimeout(()=>{ closeAlert(); },3000); } function closeAlert(){ customAlert.classList.remove("show"); clearTimeout(alertTimeout); } /* USERS */ const users=[{email:"user1@test.com", password:"1234", name:"کاربر ۱"},{email:"user2@test.com", password:"abcd", name:"کاربر ۲"}]; /* ADMIN */ const adminUserName="admin"; const adminPassword="1234"; /* PRODUCTS */ let products=[ {id:1,name:"گوشی سامسونگ A54",price:12000000,img:"https://picsum.photos/200?1"}, {id:2,name:"لپ‌تاپ لنوو",price:35000000,img:"https://picsum.photos/200?2"}, {id:3,name:"هدفون بلوتوث",price:1500000,img:"https://picsum.photos/200?3"}, {id:4,name:"تلویزیون 55 اینچ",price:28000000,img:"https://picsum.photos/200?4"}, {id:5,name:"ساعت هوشمند",price:4200000,img:"https://picsum.photos/200?5"} ]; /* ORDERS */ let orders=JSON.parse(localStorage.getItem("orders"))||[]; /* RENDER PRODUCTS */ const productList=document.getElementById("productList"); const userProductList=document.getElementById("userProductList"); const search=document.getElementById("search"); function renderProducts(list,container){ container.innerHTML=""; list.forEach(p=>{ container.innerHTML+= <div class="card"> <img src="${p.img}"> <h4>${p.name}</h4> <div class="price">${p.price.toLocaleString()} تومان</div> <button onclick="addToCartUser(${p.id})">افزودن به سبد</button> </div> ; }); } renderProducts(products,productList); renderProducts(products,userProductList); /* CART USER */ function getCartUser(){return JSON.parse(localStorage.getItem("cartUser"))||[];} function saveCartUser(c){localStorage.setItem("cartUser",JSON.stringify(c));updateCartCountUser();} function addToCartUser(id){const cart=getCartUser();cart.push(products.find(p=>p.id===id));saveCartUser(cart);showAlert("به سبد خرید اضافه شد");} function removeFromCartUser(i){const cart=getCartUser();cart.splice(i,1);saveCartUser(cart);loadCartUser();} function loadCartUser(){const cart=getCartUser();const div=document.getElementById("cartItemsUser");let total=0;div.innerHTML="";cart.forEach((p,i)=>{total+=p.price;div.innerHTML+=<div class="cart-item"><span>${p.name}</span><span>${p.price.toLocaleString()} <button onclick="removeFromCartUser(${i})">❌</button></span></div>;});document.getElementById("totalPriceUser").innerText="جمع کل: "+total.toLocaleString()+" تومان";} function updateCartCountUser(){document.getElementById("cartCount").innerText=getCartUser().length;} updateCartCountUser(); /* PLACE ORDER */ function placeOrder(){ const name=document.getElementById("orderName").value.trim(); const phone=document.getElementById("orderPhone").value.trim(); const address=document.getElementById("orderAddress").value.trim(); const payment=document.getElementById("orderPayment").value; const cart=getCartUser(); if(!name||!phone||!address||cart.length===0){showAlert("تمام فیلدها و سبد خرید باید پر شود");return;} const order={id:Date.now(),name,phone,address,payment,items:cart}; orders.push(order); localStorage.setItem("orders",JSON.stringify(orders)); showAlert("سفارش شما با موفقیت ثبت شد!"); localStorage.removeItem("cartUser"); updateCartCountUser(); document.getElementById("orderName").value=""; document.getElementById("orderPhone").value=""; document.getElementById("orderAddress").value=""; loadCartUser(); renderAdmin(); } /* PAGES */ function showPage(id){ document.querySelectorAll(".page").forEach(p=>p.classList.remove("active")); document.getElementById(id).classList.add("active"); if(id==="cartUser") loadCartUser(); if(id==="admin") renderAdmin(); if(id==="user") renderProducts(products,userProductList); } /* LOGIN SHARED */ function login(){ const user=document.getElementById("loginUser").value.trim(); const pass=document.getElementById("loginPass").value.trim(); if(user===adminUserName && pass===adminPassword){ showAlert("ورود مدیر موفق!"); showPage("admin"); } else { const u=users.find(x=>x.email===user && x.password===pass); if(u){ showAlert("ورود کاربر موفق!"); showPage("user"); } else { showAlert("نام کاربری یا رمز عبور اشتباه است!"); } } } /* ADMIN PANEL */ function renderAdmin(){ const adminProducts=document.getElementById("adminProducts"); adminProducts.innerHTML=""; products.forEach((p,i)=>{ adminProducts.innerHTML+= <div class="card" style="margin-bottom:5px;"> <strong>${p.name}</strong> - ${p.price.toLocaleString()} تومان <button onclick="editProduct(${i})">ویرایش</button> <button onclick="deleteProduct(${i})">حذف</button> </div>; }); const adminOrders=document.getElementById("adminOrders"); adminOrders.innerHTML=""; orders.forEach(o=>{ let items=o.items.map(it=>it.name+" ("+it.price.toLocaleString()+" تومان)").join(", "); adminOrders.innerHTML+=<div class="order-summary"><strong>${o.name}</strong> - ${o.phone}<br>آدرس: ${o.address}<br>پرداخت: ${o.payment}<br>محصولات: ${items}</div>; }); } function addProduct(){ const name=document.getElementById("adminName").value.trim(); const price=parseInt(document.getElementById("adminPrice").value); const img=document.getElementById("adminImg").value.trim(); if(!name||!price||!img){showAlert("همه فیلدها را پر کنید");return;} products.push({id:Date.now(),name,price,img}); renderProducts(products,productList); renderProducts(products,userProductList); renderAdmin(); document.getElementById("adminName").value=""; document.getElementById("adminPrice").value=""; document.getElementById("adminImg").value=""; } function deleteProduct(i){products.splice(i,1);renderProducts(products,productList);renderProducts(products,userProductList);renderAdmin();} function editProduct(i){ const p=products[i]; const newName=prompt("نام محصول:",p.name); const newPrice=parseInt(prompt("قیمت محصول:",p.price)); const newImg=prompt("لینک عکس:",p.img); if(newName&&newPrice&&newImg){products[i]={id:p.id,name:newName,price:newPrice,img:newImg};renderProducts(products,productList);renderProducts(products,userProductList);renderAdmin();} } </script>
